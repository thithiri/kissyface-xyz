# KissyFace.xyz

**KissyFace.xyz** ðŸ˜˜ represents the future of responsible and provable AI content generation ecosystem: transparent, fair, decentralized, and community-owned. ðŸ’‹

It makes LoRA image models on HuggingFace.co ðŸ¤— easily accessible to end-users while rewarding the model creators.

You can read more about this project in [ABOUT.md](./ABOUT.md).

## Project structure

- `frontend`: Next.js 15 + React 19 + Tailwind CSS + Framer Motion
- `backend`: Rust-based [Nautilus server](./src/nautilus-server/src/apps/kissyface-xyz/) in a Trusted Execution Environment (TEE)
- `database`: PostgreSQL for credit tracking and creator balances (later: aggreagated on-chain on Sui)
- `models`: Curated LoRA collection from HuggingFace.co with prompt refinement
- `storage`: Walrus decentralized storage via Tusky.io SDK (to store generated images in user's own Tusky.io account)
- `nautilus`: Nautilus framework for secure and verifiable off-chain computation on Sui
- `wallet`: Sui wallet integration via @mysten/dapp-kit (each new wallet get 10 ðŸ’‹ to generate 1 image)

## Nautilus

[Kissyface-xyz Nautilus app](./src/nautilus-server/src/apps/kissyface-xyz/) follows Nautilus structure closely. It is fully implemented in Rust.

In Nautilus, following actions are taken.
- inference call for AI image generation
- deduction of credit from user
- addition of credit to the model creator

**About Nautilus:** Nautilus is a framework for **secure and verifiable off-chain computation on Sui**. For full product details, see the [Nautilus documentation](https://docs.sui.io/concepts/cryptography/nautilus).

[expose_enclave.sh](./expose_enclave.sh) needs to be updated with secrets:

```
API_KEY="###"
ADMIN_SECRET="###"
FRONTEND_URL="https://www.kissyface.xyz"
```

[run.sh](./src/nautilus-server/run.sh) can be used as it is as it has already been configured for allowed endpoints.

## Nautilus deployment proof
```shell
[ec2-user@ip-172-31-35-131 kissyface-xyz]$ cat out/nitro.pcrs
db1e3213fda48ad590368b72dcc3e7791b345601b3e6d332926a1d73404da47303905c7fd5d02566e9f4283b5f4f4e1f PCR0
db1e3213fda48ad590368b72dcc3e7791b345601b3e6d332926a1d73404da47303905c7fd5d02566e9f4283b5f4f4e1f PCR1
21b9efbc184807662e966d34f390821309eeac6802309798826296bf3e8bec7c10edb30948c90ba67310f7b964fc500a PCR2
```

```shell
[ec2-user@ip-172-31-35-131 kissyface-xyz]$ make run
sudo nitro-cli \
        run-enclave \
        --cpu-count 2 \
        --memory 512M \
        --eif-path out/nitro.eif
Start allocating memory...
Started enclave with enclave-cid: 16, memory: 1024 MiB, cpu-ids: [1, 3]
{
  "EnclaveName": "nitro",
  "EnclaveID": "i-045def955dcb1ce0a-enc19abb740118ba6c",
  "ProcessID": 48550,
  "EnclaveCID": 16,
  "NumberOfCPUs": 2,
  "CPUIDs": [
    1,
    3
  ],
  "MemoryMiB": 1024
}
```

```shell
curl -H 'Content-Type: application/json' -X GET http://54.166.186.112:3000/health_check

{"pk":"b8882f1f01a46162efc2d9280a56e7402b2574b69df3a1c6fe84460746f01d1e","endpoints_status":{}}%
```

```shell
curl -H 'Content-Type: application/json' -X GET http://54.166.186.112:3000/get_attestation

{"attestation":"8444a1013822a0591120bf696d6f64756c655f69647827692d30343564656639353564636231636530612d656e633031396162623734303131386261366366646967657374665348413338346974696d657374616d701b0000019abb7a468f6470637273b0005830db1e3213fda48ad590368b72dcc3e7791b345601b3e6d332926a1d73404da47303905c7fd5d02566e9f4283b5f4f4e1f015830db1e3213fda48ad590368b72dcc3e7791b345601b3e6d332926a1d73404da47303905c7fd5d02566e9f4283b5f4f4e1f02583021b9efbc184807662e966d34f390821309eeac6802309798826296bf3e8bec7c10edb30948c90ba67310f7b964fc500a035830e6fb0cb0a6338a0ff980e4ef92a57bbbd8cc29a0f18b839305766da12aa0ce7966131aacdb7e2418d039de129a4b3c170458301bcfa36c9f0689c3cdb90dbf849c9ba66858e378e646fa2fcdc2e122443b60e096b9f6af6b241e639f6ef9b463942d6f0558300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000658300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000758300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000858300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000958300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000a58300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000b58300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000c58300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000d58300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000e58300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000f58300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006b636572746966696361746559027f3082027b30820201a0030201020210019abb740118ba6c000000006925c118300a06082a8648ce3d04030330818e310b30090603550406130255533113301106035504080c0a57617368696e67746f6e3110300e06035504070c0753656174746c65310f300d060355040a0c06416d617a6f6e310c300a060355040b0c034157533139303706035504030c30692d30343564656639353564636231636530612e75732d656173742d312e6177732e6e6974726f2d656e636c61766573301e170d3235313132353134343534315a170d3235313132353137343534345a308193310b30090603550406130255533113301106035504080c0a57617368696e67746f6e3110300e06035504070c0753656174746c65310f300d060355040a0c06416d617a6f6e310c300a060355040b0c03415753313e303c06035504030c35692d30343564656639353564636231636530612d656e63303139616262373430313138626136632e75732d656173742d312e6177733076301006072a8648ce3d020106052b8104002203620004fcadda76403eb4acc54eb86d08cfc78204445942f21ef81c45b3ad0c46783212c0618c6b6a6ad81e4b48678ddeed1d426c911fd3faab481a29681fe4f4512e7b4ebae3482802e0bb69b6c2b67fc0ce291e86354ea8d01431efaab920718c2a86a31d301b300c0603551d130101ff04023000300b0603551d0f0404030206c0300a06082a8648ce3d0403030368003065023027b68bbfa57842b81f42962fda354ad49625404f2fe4637add94378c0cc6d5f69d84b72e29349f4fad53231bcd170b4c023100a8031b8f28d0070ce2d5ffb2cfffecb393dde8ce2bc63d36ac6628ca299e147bc2bb1805913d63351d4e4fc0c6280b0868636162756e646c65845902153082021130820196a003020102021100f93175681b90afe11d46ccb4e4e7f856300a06082a8648ce3d0403033049310b3009060355040613025553310f300d060355040a0c06416d617a6f6e310c300a060355040b0c03415753311b301906035504030c126177732e6e6974726f2d656e636c61766573301e170d3139313032383133323830355a170d3439313032383134323830355a3049310b3009060355040613025553310f300d060355040a0c06416d617a6f6e310c300a060355040b0c03415753311b301906035504030c126177732e6e6974726f2d656e636c617665733076301006072a8648ce3d020106052b8104002203620004fc0254eba608c1f36870e29ada90be46383292736e894bfff672d989444b5051e534a4b1f6dbe3c0bc581a32b7b176070ede12d69a3fea211b66e752cf7dd1dd095f6f1370f4170843d9dc100121e4cf63012809664487c9796284304dc53ff4a3423040300f0603551d130101ff040530030101ff301d0603551d0e041604149025b50dd90547e796c396fa729dcf99a9df4b96300e0603551d0f0101ff040403020186300a06082a8648ce3d0403030369003066023100a37f2f91a1c9bd5ee7b8627c1698d255038e1f0343f95b63a9628c3d39809545a11ebcbf2e3b55d8aeee71b4c3d6adf3023100a2f39b1605b27028a5dd4ba069b5016e65b4fbde8fe0061d6a53197f9cdaf5d943bc61fc2beb03cb6fee8d2302f3dff65902c1308202bd30820244a00302010202101a0c15479e282fbb6dace849e24621e5300a06082a8648ce3d0403033049310b3009060355040613025553310f300d060355040a0c06416d617a6f6e310c300a060355040b0c03415753311b301906035504030c126177732e6e6974726f2d656e636c61766573301e170d3235313132313138303734355a170d3235313231313139303734355a3064310b3009060355040613025553310f300d060355040a0c06416d617a6f6e310c300a060355040b0c034157533136303406035504030c2d626438306463303565653235363965642e75732d656173742d312e6177732e6e6974726f2d656e636c617665733076301006072a8648ce3d020106052b8104002203620004e0334e3dac1145f4963a04dd4799d99714278f4a65e88c68d4846751276869b6cf7a2f5956c735cf66cb821d6926a3857e64395239deaa4b68ed5d2bda140d44353134b8583033d6d417f5da471b488c2c08fa90167605cb83b08ab76818ef70a381d53081d230120603551d130101ff040830060101ff020102301f0603551d230418301680149025b50dd90547e796c396fa729dcf99a9df4b96301d0603551d0e04160414fcc29f31bb71c7ec1e6f8865e1a18f28db55c38a300e0603551d0f0101ff040403020186306c0603551d1f046530633061a05fa05d865b687474703a2f2f6177732d6e6974726f2d656e636c617665732d63726c2e73332e616d617a6f6e6177732e636f6d2f63726c2f61623439363063632d376436332d343262642d396539662d3539333338636236376638342e63726c300a06082a8648ce3d040303036700306402303ebfcc8fea927eeec1ad72a579b1d3dfda09e22198f9dc1b04daa02355feb2d1741ec3d706bbdadb1c06ad5381b833fa02301706c92d7802accc336f21822f72b262a47da505afcbba41ed38833bf2794e5afdc681f3110af3f26c7bc913c2164f2f590318308203143082029aa003020102021010b1c53f05079b6b57e7a0d4db93b9c9300a06082a8648ce3d0403033064310b3009060355040613025553310f300d060355040a0c06416d617a6f6e310c300a060355040b0c034157533136303406035504030c2d626438306463303565653235363965642e75732d656173742d312e6177732e6e6974726f2d656e636c61766573301e170d3235313132353030303434365a170d3235313133303139303434365a308189313c303a06035504030c33663331376133383065326538383739332e7a6f6e616c2e75732d656173742d312e6177732e6e6974726f2d656e636c61766573310c300a060355040b0c03415753310f300d060355040a0c06416d617a6f6e310b3009060355040613025553310b300906035504080c0257413110300e06035504070c0753656174746c653076301006072a8648ce3d020106052b81040022036200048a67b1eac96831db6024c8d96df377ab767b7d4f6318d4a6868b68dfeb3c503ee7db831b33a812877507edab5c6e1bd6761ef68c49c5762884bd119743183e68b3d9d742411fc3fc03036359e3c6949c4ce440a1fb077c346881952bea97fcb8a381ea3081e730120603551d130101ff040830060101ff020101301f0603551d23041830168014fcc29f31bb71c7ec1e6f8865e1a18f28db55c38a301d0603551d0e04160414d25b081d83a4e6d1dc25fbab880c4b3dbdf3855b300e0603551d0f0101ff0404030201863081800603551d1f047930773075a073a071866f687474703a2f2f63726c2d75732d656173742d312d6177732d6e6974726f2d656e636c617665732e73332e75732d656173742d312e616d617a6f6e6177732e636f6d2f63726c2f61616438646439352d383462332d346435332d383963632d3537383734393431653834352e63726c300a06082a8648ce3d0403030368003065023100a4d16f599b52640b2e0ed124d3ce256ef4c9db44341a9b1854c18260188fdf8831dd9455e1ee27af22dd2bc848d2635c02306aace1ddd623e1b0970a1c55f276af747f6ceba9b47aaa8d949e62c929615e34db34751a382c1c25702da99769c602285902c3308202bf30820245a003020102021500f3ebb64994e4470d3b6f316ce3d90d0072f30e4f300a06082a8648ce3d040303308189313c303a06035504030c33663331376133383065326538383739332e7a6f6e616c2e75732d656173742d312e6177732e6e6974726f2d656e636c61766573310c300a060355040b0c03415753310f300d060355040a0c06416d617a6f6e310b3009060355040613025553310b300906035504080c0257413110300e06035504070c0753656174746c65301e170d3235313132353130353031345a170d3235313132363130353031345a30818e310b30090603550406130255533113301106035504080c0a57617368696e67746f6e3110300e06035504070c0753656174746c65310f300d060355040a0c06416d617a6f6e310c300a060355040b0c034157533139303706035504030c30692d30343564656639353564636231636530612e75732d656173742d312e6177732e6e6974726f2d656e636c617665733076301006072a8648ce3d020106052b8104002203620004e0ec430f13ed9e16863f99964965027ea73527ba2feb3a487b4cfa89895df6a8381875c20452a85f381b4e14d96453b082c87b721a929551192a033f3537a06228b2d6126eb2c465ee15cf895846957b0309015cb72377f89e70d21a9fe132cea366306430120603551d130101ff040830060101ff020100300e0603551d0f0101ff040403020204301d0603551d0e041604149c4356d9a3e4d9e9c34384b71de811dee68877d2301f0603551d23041830168014d25b081d83a4e6d1dc25fbab880c4b3dbdf3855b300a06082a8648ce3d040303036800306502310091554cf82738fa1924c1651b304ec41a0b1bc6a06dd6ac6bf97628ee61556d80c234d03b876bb25f8bda32e67e6fc9f1023070f942b483ce85bb7f0fc862729d899d080ebd760c95bf5cdb568bd6629668091f7f27c32acd604853450567c22867316a7075626c69635f6b65795820b8882f1f01a46162efc2d9280a56e7402b2574b69df3a1c6fe84460746f01d1e69757365725f64617461f6656e6f6e6365f6ff58603556416b340b8f9ab6089f8440b9ac8863199821b3dad1403a457acfb3c23feabe75696a1b771a4e96f7209f8f8da23608f89b8826f874fb58d0376b04f95a0afbf9548f9cc17aca6698b5871700080b5e46da298aedeaeb1a8377e2b7454b2e"}%
```
